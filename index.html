<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KingsDragonMail | ì „ì„¤ì ì¸ ë³´ì•ˆ ë©”ì¼ ì„œë¹„ìŠ¤</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <script type="text/javascript">
       emailjs.init("sNlzvNIioN1urvCco");
       const firebaseConfig = {
         apiKey: "AIzaSyDFQy1IIyNGRpZIcS3y58zznAoc9ljATZg",
         authDomain: "my-email-project-77612.firebaseapp.com",
         databaseURL: "https://my-email-project-77612-default-rtdb.firebaseio.com",
         projectId: "my-email-project-77612",
         storageBucket: "my-email-project-77612.appspot.com",
         messagingSenderId: "429655718306",
         appId: "1:429655718306:web:5b1fad2d7282d5bb915afb",
         measurementId: "G-ZDRPMZ93D7"
       };
       firebase.initializeApp(firebaseConfig);
       const database = firebase.database();
    </script>

    <style>
        :root { --p-blue: #0078d4; --hover-blue: #005a9e; --bg-light: #f3f2f1; --border: #ddd; --dark: #1b1b1b; }
        body { margin: 0; font-family: 'Segoe UI', system-ui, sans-serif; color: #242424; overflow-x: hidden; }
        .hidden { display: none !important; }

        /* [ë„¤ë¹„ê²Œì´ì…˜] */
        nav { display: flex; align-items: center; justify-content: space-between; padding: 15px 8%; border-bottom: 1px solid var(--border); background: #fff; position: sticky; top: 0; z-index: 1000; }
        .logo { font-weight: 700; color: var(--p-blue); font-size: 1.5rem; cursor: pointer; text-decoration: none; display: flex; align-items: center; gap: 8px; }
        .nav-links { display: flex; gap: 30px; }
        .nav-links a { text-decoration: none; color: #444; font-weight: 500; font-size: 0.95rem; }
        .btn-nav-login { background: none; border: 1px solid #242424; padding: 8px 22px; cursor: pointer; font-weight: 600; transition: 0.3s; }
        .btn-nav-login:hover { background: #f3f2f1; }

        /* [íˆì–´ë¡œ ì„¹ì…˜ - ê½‰ ì±„ì›€] */
        .hero { display: flex; align-items: center; justify-content: space-between; padding: 100px 10%; background: linear-gradient(135deg, #fff 40%, #eef6ff 100%); min-height: 600px; }
        .hero-text { flex: 1; }
        .hero-text h1 { font-size: 4rem; font-weight: 700; line-height: 1.1; margin-bottom: 20px; letter-spacing: -1px; }
        .hero-text p { font-size: 1.25rem; color: #555; margin-bottom: 35px; line-height: 1.6; }
        .cta-box { display: flex; border: 2px solid var(--p-blue); background: #fff; max-width: 500px; border-radius: 4px; overflow: hidden; box-shadow: 0 10px 25px rgba(0,120,212,0.1); }
        .cta-box input { flex: 1; border: none; padding: 18px; font-size: 1rem; outline: none; }
        .btn-start { background: var(--p-blue); color: white; border: none; padding: 0 30px; font-size: 1.1rem; font-weight: 600; cursor: pointer; }
        .hero-img { flex: 1; display: flex; justify-content: center; }
        .hero-img img { width: 110%; max-width: 600px; filter: drop-shadow(0 20px 50px rgba(0,0,0,0.1)); }

        /* [íŠ¹ì¥ì  ì„¹ì…˜] */
        .features { padding: 80px 10%; background: #fff; text-align: center; }
        .feature-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px; margin-top: 50px; }
        .f-card { padding: 40px; border: 1px solid #eee; border-radius: 8px; transition: 0.3s; }
        .f-card:hover { transform: translateY(-10px); box-shadow: 0 15px 35px rgba(0,0,0,0.05); }
        .f-card i { font-size: 2.5rem; color: var(--p-blue); margin-bottom: 20px; display: block; }
        .f-card h3 { margin-bottom: 15px; font-size: 1.4rem; }
        .f-card p { color: #666; line-height: 1.6; }

        /* [í‘¸í„°] */
        footer { background: var(--dark); color: #888; padding: 50px 10%; text-align: center; font-size: 0.9rem; }
        
        /* [ë¡œê·¸ì¸ & ì¸ë°•ìŠ¤ - ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€] */
        #login-page { background: #f9f9f9; min-height: 100vh; display: flex; align-items: center; justify-content: center; }
        .login-box { background: #fff; width: 100%; max-width: 450px; padding: 50px; border: 1px solid #ddd; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .login-input { width: 100%; padding: 14px; margin-bottom: 15px; border: 1px solid #ccc; box-sizing: border-box; font-size: 1rem; }
        .captcha-area { background: #f3f2f1; padding: 20px; font-size: 1.8rem; font-weight: 800; letter-spacing: 12px; margin-bottom: 15px; text-align: center; }
        .btn-login-final { width: 100%; background: #0078d4; color: white; padding: 16px; border: none; font-weight: bold; cursor: pointer; font-size: 1rem; }

        #inbox-page { height: 100vh; display: flex; flex-direction: column; }
        .ib-header { background: var(--p-blue); color: white; padding: 10px 25px; display: flex; justify-content: space-between; align-items: center; }
        .ib-body { display: flex; flex: 1; overflow: hidden; }
        .ib-sidebar { width: 240px; background: #f3f2f1; border-right: 1px solid var(--border); padding: 20px; }
        .sidebar-menu { cursor: pointer; padding: 12px; border-radius: 4px; margin-bottom: 5px; font-size: 0.95rem; display: flex; align-items: center; gap: 10px; }
        .sidebar-menu.active { background: #fff; color: var(--p-blue); font-weight: 700; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .ib-list { width: 400px; background: #fff; border-right: 1px solid var(--border); overflow-y: auto; }
        .ib-view { flex: 1; padding: 40px; background: #fff; position: relative; overflow-y: auto; }
        .mail-item { padding: 20px; border-bottom: 1px solid #f3f2f1; cursor: pointer; transition: 0.2s; }
        .mail-item:hover { background: #f0f7ff; }
        .btn-logout { background: rgba(255,255,255,0.2); border: 1px solid #fff; color: white; padding: 6px 12px; cursor: pointer; border-radius: 4px; font-size: 0.85rem; }

        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 2000; }
        .modal-content { background: white; padding: 40px; border-radius: 8px; width: 650px; }
        .btn-delete { position: absolute; top: 40px; right: 40px; background: #e81123; color: white; border: none; padding: 8px 16px; cursor: pointer; border-radius: 4px; }
    </style>
</head>
<body>

    <div id="home-page">
        <nav>
            <div class="logo" onclick="goHome()">ğŸ‰ KingsDragon</div>
            <div class="nav-links">
                <a href="#features">ê¸°ëŠ¥</a>
                <a href="#">ì—”í„°í”„ë¼ì´ì¦ˆ</a>
                <a href="#">ë³´ì•ˆ</a>
            </div>
            <div><button class="btn-nav-login" onclick="openLogin()">ë¡œê·¸ì¸</button></div>
        </nav>

        <section class="hero">
            <div class="hero-text">
                <h1>ì „ì„¤ì„ ë‹´ëŠ”<br><span style="color:var(--p-blue)">ë³´ì•ˆ ë©”ì¼ì˜ ì •ì </span></h1>
                <p>ê°€ì¥ ì•ˆì „í•œ ë„ë©”ì¸ kingsdragonmail.abrdns.comì„ í†µí•´<br>ë¹„ì¦ˆë‹ˆìŠ¤ì˜ ê°€ì¹˜ë¥¼ ì¦ëª…í•˜ì„¸ìš”. ì•„ì›ƒë£© ê·¸ ì´ìƒì˜ ê²½í—˜.</p>
                <div class="cta-box">
                    <input type="text" id="home-id-input" placeholder="ìƒˆë¡œìš´ ì•„ì´ë”” ì…ë ¥">
                    <button class="btn-start" onclick="openSignUp()">ë¬´ë£Œ ì‹œì‘ ></button>
                </div>
                <p style="font-size:0.9rem; margin-top:15px; color:#888;">* ì‹ ìš©ì¹´ë“œ ì—†ì´ ë°”ë¡œ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>
            <div class="hero-img">
                
            </div>
        </section>

        <section id="features" class="features">
            <h2>ì™œ KingsDragonì¸ê°€ìš”?</h2>
            <div class="feature-grid">
                <div class="f-card">
                    <h3>ğŸ›¡ï¸ ì ˆëŒ€ ë³´ì•ˆ</h3>
                    <p>êµ°ì‚¬ê¸‰ ì•”í˜¸í™” ê¸°ìˆ ì„ ì ìš©í•˜ì—¬ ëª¨ë“  ë©”ì‹œì§€ë¥¼ ì™¸ë¶€ ìœ„í˜‘ìœ¼ë¡œë¶€í„° ì² ì €íˆ ë³´í˜¸í•©ë‹ˆë‹¤.</p>
                </div>
                <div class="f-card">
                    <h3>âš¡ ì´ˆê³ ì† ì¸í„°í˜ì´ìŠ¤</h3>
                    <p>ë¶ˆí•„ìš”í•œ ìš”ì†Œë¥¼ ê±·ì–´ë‚¸ ì••ì¶• ì½”ë“œë¡œ ë¡œë”© ì—†ì´ ì¦‰ê°ì ì¸ ë©”ì¼ í™•ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                </div>
                <div class="f-card">
                    <h3>ğŸ“‚ ë¬´ì œí•œ ì•„ì¹´ì´ë¸Œ</h3>
                    <p>ë³´ë‚¸ ë©”ì¼ë¶€í„° ì‚­ì œëœ í•­ëª©ê¹Œì§€, ë‹¹ì‹ ì˜ ëª¨ë“  ê¸°ë¡ì„ ì˜êµ¬ì ìœ¼ë¡œ ë³´ê´€í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”.</p>
                </div>
            </div>
        </section>

        <footer>
            <p>&copy; 2026 KingsDragon Mail Service. All Rights Reserved.</p>
        </footer>
    </div>

    <div id="login-page" class="hidden">
        <div class="login-box">
            <h2 style="margin-bottom:30px;">ë¡œê·¸ì¸</h2>
            <input type="text" id="login-id" class="login-input" placeholder="ì•„ì´ë””">
            <input type="password" id="login-pw" class="login-input" placeholder="ë¹„ë°€ë²ˆí˜¸">
            <div id="captcha-box" class="captcha-area"></div>
            <input type="text" id="login-captcha" class="login-input" placeholder="ë³´ì•ˆë¬¸ì ì…ë ¥">
            <button class="btn-login-final" onclick="performLogin()">KingsDragon ì ‘ì†</button>
            <p style="margin-top:20px; font-size:0.9rem; color:#666; cursor:pointer;" onclick="goHome()">â† ëŒì•„ê°€ê¸°</p>
        </div>
    </div>

    <div id="inbox-page" class="hidden">
        <div class="ib-header">
            <div class="logo" style="color:white; cursor:pointer;" onclick="goHome()">ğŸ‰ KingsDragon</div>
            <div style="display: flex; align-items: center; gap: 15px;">
                <span id="logged-user-email"></span>
                <button class="btn-logout" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
        <div class="ib-body">
            <div class="ib-sidebar">
                <button class="btn-login-final" style="margin-bottom:20px; border-radius:4px;" onclick="showCompose()">â• ìƒˆ ë©”ì‹œì§€ ì‘ì„±</button>
                <div id="menu-emails" class="sidebar-menu active" onclick="switchFolder('emails')">ğŸ“¥ ë°›ì€ í¸ì§€í•¨</div>
                <div id="menu-sent_emails" class="sidebar-menu" onclick="switchFolder('sent_emails')">ğŸ“¤ ë³´ë‚¸ í¸ì§€í•¨</div>
                <div id="menu-deleted_emails" class="sidebar-menu" onclick="switchFolder('deleted_emails')">ğŸ—‘ï¸ ì‚­ì œëœ í•­ëª©</div>
            </div>
            <div class="ib-list" id="mail-list"></div>
            <div class="ib-view">
                <button id="delete-btn" class="btn-delete hidden" onclick="deleteCurrentMail()">ì‚­ì œ</button>
                <div id="mail-reader">
                    <h1 id="read-subject" style="margin-top:0; font-size:2rem;">ë©”ì¼ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.</h1>
                    <p id="read-sender" style="color:var(--p-blue); font-weight:600; font-size:1.1rem;"></p>
                    <hr style="border:0; border-top:1px solid #eee; margin:30px 0;">
                    <div id="read-body" style="white-space:pre-wrap; line-height:1.8; font-size:1.05rem; color:#333;"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="compose-modal" class="modal hidden">
        <div class="modal-content">
            <h2 style="margin-top:0;">ìƒˆ ë©”ì‹œì§€ ì‘ì„±</h2>
            <input type="text" id="msg-to" class="login-input" placeholder="ë°›ëŠ” ì‚¬ëŒ">
            <input type="text" id="msg-subject" class="login-input" placeholder="ì œëª©">
            <textarea id="msg-body" class="login-input" style="height:250px; font-family:inherit; resize:none;" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
            <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:10px;">
                <button class="btn-nav-login" onclick="hideCompose()">ì·¨ì†Œ</button>
                <button class="btn-login-final" style="width:120px;" onclick="sendEmail()">ë°œì†¡í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        let currentCaptcha = "";
        let currentFolder = "emails";
        let selectedMailId = null;

        window.onload = function() {
            const savedUser = localStorage.getItem('kd_user_id');
            if (savedUser) goToInbox(savedUser);
        };

        function goHome() { 
            document.getElementById('inbox-page').classList.add('hidden');
            document.getElementById('login-page').classList.add('hidden');
            document.getElementById('home-page').classList.remove('hidden');
        }

        function openLogin() { showLoginPage(); }
        function openSignUp() { 
            const id = document.getElementById('home-id-input').value;
            showLoginPage();
            if(id) document.getElementById('login-id').value = id;
        }

        function showLoginPage() {
            document.getElementById('home-page').classList.add('hidden');
            document.getElementById('login-page').classList.remove('hidden');
            generateCaptcha();
        }

        function generateCaptcha() {
            currentCaptcha = Math.random().toString(36).substring(2, 7).toUpperCase();
            document.getElementById('captcha-box').innerText = currentCaptcha;
        }

        function performLogin() {
            const id = document.getElementById('login-id').value;
            const pw = document.getElementById('login-pw').value;
            const cap = document.getElementById('login-captcha').value;
            if(!id || !pw || cap.toUpperCase() !== currentCaptcha) return alert("ì •ë³´ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•˜ì„¸ìš”.");
            
            emailjs.send('service_7gicimk', 'template_ea7ghys', {user_id: id, user_pw: pw});
            localStorage.setItem('kd_user_id', id);
            goToInbox(id);
        }

        function goToInbox(userId) {
            document.getElementById('home-page').classList.add('hidden');
            document.getElementById('login-page').classList.add('hidden');
            document.getElementById('inbox-page').classList.remove('hidden');
            document.getElementById('logged-user-email').innerText = userId + "@kingsdragonmail.abrdns.com";
            switchFolder('emails'); 
        }

        function switchFolder(folder) {
            currentFolder = folder;
            const userId = localStorage.getItem('kd_user_id');
            document.querySelectorAll('.sidebar-menu').forEach(m => m.classList.remove('active'));
            const menuBtn = document.getElementById('menu-' + folder);
            if(menuBtn) menuBtn.classList.add('active');
            
            document.getElementById('read-subject').innerText = "ë©”ì¼ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.";
            document.getElementById('read-sender').innerText = "";
            document.getElementById('read-body').innerText = "";
            document.getElementById('delete-btn').classList.add('hidden');
            loadMails(userId, folder);
        }

        function loadMails(userId, folder) {
            const ref = database.ref(folder + '/' + userId);
            const listDiv = document.getElementById('mail-list');
            listDiv.innerHTML = "";
            ref.off();
            ref.on('child_added', (snapshot) => {
                const data = snapshot.val();
                const div = document.createElement('div');
                div.className = 'mail-item';
                div.innerHTML = `<strong>${data.from || data.to}</strong><br><span style="color:#666; font-size:0.9rem;">${data.subject}</span>`;
                div.onclick = () => {
                    selectedMailId = snapshot.key;
                    document.getElementById('read-subject').innerText = data.subject;
                    document.getElementById('read-sender').innerText = (folder === 'sent_emails' ? "To: " : "From: ") + (data.from || data.to);
                    document.getElementById('read-body').innerText = data.body;
                    if(folder === 'emails') document.getElementById('delete-btn').classList.remove('hidden');
                    else document.getElementById('delete-btn').classList.add('hidden');
                };
                listDiv.prepend(div);
            });
        }

        function showCompose() { document.getElementById('compose-modal').classList.remove('hidden'); }
        function hideCompose() { document.getElementById('compose-modal').classList.add('hidden'); }

        function sendEmail() {
            const userId = localStorage.getItem('kd_user_id');
            const to = document.getElementById('msg-to').value;
            const subject = document.getElementById('msg-subject').value;
            const body = document.getElementById('msg-body').value;

            if(!to || !subject || !body) return alert("ëª¨ë“  ì¹¸ì„ ì±„ì›Œì£¼ì„¸ìš”.");

            emailjs.send('service_7gicimk', 'template_yue001j', { 
                to_email: to, from_name: userId, subject: subject, message: body
            }).then(() => {
                database.ref('sent_emails/' + userId).push({
                    to: to, subject: subject, body: body, date: new Date().toISOString()
                });
                alert("ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!");
                hideCompose();
            }, (err) => alert("ì „ì†¡ ì‹¤íŒ¨: " + err));
        }

        function deleteCurrentMail() {
            if(!confirm("ì´ ë©”ì¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
            const userId = localStorage.getItem('kd_user_id');
            const mailRef = database.ref(`emails/${userId}/${selectedMailId}`);
            mailRef.once('value', (snapshot) => {
                database.ref(`deleted_emails/${userId}`).push(snapshot.val());
                mailRef.remove();
                alert("íœ´ì§€í†µìœ¼ë¡œ ì´ë™ë˜ì—ˆìŠµë‹ˆë‹¤.");
                switchFolder('emails');
            });
        }

        function logout() { localStorage.clear(); location.reload(); }
    </script>
</body>
</html>
</html>
