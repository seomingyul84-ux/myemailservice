<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KingsDragonMail | ì „ì„¤ì ì¸ ë³´ì•ˆ ë©”ì¼ ì„œë¹„ìŠ¤</title>
    
    <meta name="description" content="KingsDragonMail - ì „ì„¤ì ì¸ ë³´ì•ˆê³¼ ìµëª…ì„±ì„ ë³´ì¥í•˜ëŠ” í”„ë¦¬ë¯¸ì—„ ë©”ì¼ ì„œë¹„ìŠ¤.">
    <meta name="google-site-verification" content="DNS_OR_META_TAG_HERE" />

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <script type="text/javascript">
       emailjs.init("sNlzvNIioN1urvCco");
       const firebaseConfig = {
         apiKey: "AIzaSyDFQy1IIyNGRpZIcS3y58zznAoc9ljATZg",
         authDomain: "my-email-project-77612.firebaseapp.com",
         databaseURL: "https://my-email-project-77612-default-rtdb.firebaseio.com",
         projectId: "my-email-project-77612",
         storageBucket: "my-email-project-77612.appspot.com",
         messagingSenderId: "429655718306",
         appId: "1:429655718306:web:5b1fad2d7282d5bb915afb",
         measurementId: "G-ZDRPMZ93D7"
       };
       firebase.initializeApp(firebaseConfig);
       const database = firebase.database();
    </script>

    <style>
        :root { --p-blue: #0078d4; --hover-blue: #005a9e; --border: #ddd; --dark: #1b1b1b; }
        body { margin: 0; font-family: 'Segoe UI', system-ui, sans-serif; color: #242424; overflow-x: hidden; scroll-behavior: smooth; }
        .hidden { display: none !important; }

        nav { display: flex; align-items: center; justify-content: space-between; padding: 15px 8%; border-bottom: 1px solid var(--border); background: #fff; position: sticky; top: 0; z-index: 1000; }
        .logo { font-weight: 800; color: var(--p-blue); font-size: 1.6rem; cursor: pointer; }
        .btn-nav-login { background: none; border: 1px solid #242424; padding: 8px 22px; cursor: pointer; font-weight: 600; border-radius: 4px; }

        /* [HERO] */
        .hero { display: flex; align-items: center; justify-content: space-between; padding: 80px 10%; background: linear-gradient(145deg, #fff 40%, #eef6ff 100%); min-height: 500px; }
        .hero-text { flex: 1.2; }
        .hero-text h1 { font-size: 3.8rem; font-weight: 800; line-height: 1.1; margin: 0 0 20px 0; }
        .hero-text p { font-size: 1.2rem; color: #555; margin-bottom: 35px; }
        .cta-box { display: flex; border: 2px solid var(--p-blue); background: #fff; max-width: 500px; border-radius: 4px; box-shadow: 0 10px 25px rgba(0,120,212,0.1); }
        .cta-box input { flex: 1; border: none; padding: 18px; font-size: 1.1rem; outline: none; }
        .btn-start { background: var(--p-blue); color: white; border: none; padding: 0 30px; font-size: 1.1rem; font-weight: 600; cursor: pointer; }

        .hero-visual { flex: 0.8; display: flex; justify-content: flex-end; }
        .shield-card { width: 300px; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 20px 50px rgba(0,0,0,0.1); border-top: 6px solid var(--p-blue); animation: float 3s infinite ease-in-out; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

        /* [AUTH & PLAN] */
        .auth-container { background: #f9f9f9; min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .auth-box { background: #fff; width: 420px; padding: 50px; border: 1px solid #ddd; border-radius: 12px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .auth-input { width: 100%; padding: 14px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-size: 1rem; }
        .btn-auth-final { width: 100%; background: var(--p-blue); color: white; padding: 16px; border: none; font-weight: 700; border-radius: 4px; cursor: pointer; }
        .captcha-box { background: #f3f2f1; padding: 15px; font-size: 1.6rem; font-weight: 800; letter-spacing: 12px; margin-bottom: 15px; border-radius: 4px; }

        .plan-card { background: white; padding: 40px; border-radius: 12px; border: 1px solid #ddd; flex: 1; transition: 0.3s; position: relative; text-align: center; }
        .plan-card.premium { border: 2px solid var(--p-blue); transform: scale(1.05); box-shadow: 0 15px 35px rgba(0,120,212,0.15); }

        /* [FOOTER] */
        footer { background: #f8f9fa; border-top: 1px solid #eee; padding: 80px 10% 40px; }
        .footer-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 40px; margin-bottom: 40px; }
        .footer-col h4 { margin-bottom: 20px; font-size: 1rem; }
        .footer-col ul { list-style: none; padding: 0; color: #666; font-size: 0.9rem; }
        .footer-col li { margin-bottom: 12px; cursor: pointer; }

        /* [INBOX] */
        #inbox-page { height: 100vh; display: flex; flex-direction: column; }
        .ib-header { background: var(--p-blue); color: white; padding: 12px 25px; display: flex; justify-content: space-between; align-items: center; }
        .ib-body { display: flex; flex: 1; overflow: hidden; }
        .ib-sidebar { width: 240px; background: #f3f2f1; border-right: 1px solid var(--border); padding: 25px; }
        .sidebar-menu { cursor: pointer; padding: 12px; border-radius: 6px; margin-bottom: 8px; }
        .sidebar-menu.active { background: #fff; color: var(--p-blue); font-weight: 700; }
        .ib-list { width: 400px; background: #fff; border-right: 1px solid var(--border); overflow-y: auto; }
        .mail-item { padding: 20px; border-bottom: 1px solid #f0f0f0; cursor: pointer; }
        .ib-view { flex: 1; padding: 50px; overflow-y: auto; }
        
        /* ê°„ì§€ë‚˜ëŠ” ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ */
        .btn-logout { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 6px 15px; border-radius: 4px; cursor: pointer; backdrop-filter: blur(5px); transition: 0.3s; }
        .btn-logout:hover { background: rgba(255,255,255,0.2); border-color: white; }
    </style>
</head>
<body>

    <div id="home-page">
        <nav>
            <div class="logo" onclick="goHome()">ğŸ‰ KingsDragon</div>
            <button class="btn-nav-login" onclick="openLogin()">ë¡œê·¸ì¸</button>
        </nav>
        <section class="hero">
            <div class="hero-text">
                <h1>ì „ì„¤ì„ ë‹´ëŠ”<br><span style="color:var(--p-blue)">ë³´ì•ˆ ë©”ì¼ì˜ ì •ì </span></h1>
                <p>ê°€ì¥ ì•ˆì „í•œ ë…ì ë„ë©”ì¸ kingsdragonmail.abrdns.comì„ í†µí•´<br>ë¹„ì¦ˆë‹ˆìŠ¤ì˜ ê°€ì¹˜ë¥¼ ì¦ëª…í•˜ì„¸ìš”.</p>
                <div class="cta-box">
                    <input type="text" id="home-id-input" placeholder="ì›í•˜ëŠ” ì•„ì´ë”” ì…ë ¥">
                    <button class="btn-start" onclick="openSignUp()">ë¬´ë£Œë¡œ ì‹œì‘</button>
                </div>
            </div>
            <div class="hero-visual">
                <div class="shield-card">
                    <div style="font-size: 2.5rem; margin-bottom: 10px;">ğŸ›¡ï¸</div>
                    <div style="font-weight: 800; font-size: 1.2rem;">êµ°ì‚¬ê¸‰ ì•”í˜¸í™”</div>
                    <div style="font-size: 0.85rem; color: #777; margin-top: 10px;">ê·€í•˜ì˜ ì •ë³´ëŠ” KingsDragonì˜ ì´ì¤‘ ë³´ì•ˆ ì„±ë²½ ì•ˆì— ë³´í˜¸ë©ë‹ˆë‹¤.</div>
                </div>
            </div>
        </section>
        <footer>
            <div class="footer-grid">
                <div class="footer-col">
                    <h4>ì„œë¹„ìŠ¤</h4>
                    <ul>
                        <li onclick="showNotice('ê°œì¸ìš© ë©”ì¼', 'ë¬´ì œí•œ ìš©ëŸ‰ê³¼ ì „ìš© ì•”í˜¸í™” í‚¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.')">ê°œì¸ìš© ë©”ì¼</li>
                        <li onclick="showNotice('ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì¼', 'ê¸°ì—…ìš© ê´€ë¦¬ ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤.')">ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì¼</li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>ë¦¬ì†ŒìŠ¤</h4>
                    <ul>
                        <li onclick="showNotice('ë„ì›€ë§ ì„¼í„°', 'support@kingsdragon.mail')">ë„ì›€ë§ ì„¼í„°</li>
                        <li onclick="showNotice('ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨', 'ë°ì´í„°ë¥¼ ì ˆëŒ€ ìˆ˜ì§‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</li>
                        <li onclick="showNotice('ì´ìš©ì•½ê´€', 'í•©ë²•ì  í†µì‹ ì„ ì§€í–¥í•©ë‹ˆë‹¤.')">ì´ìš©ì•½ê´€</li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>íšŒì‚¬</h4>
                    <ul>
                        <li onclick="showNotice('KingsDragonì†Œê°œ', '2026ë…„ ì„¤ë¦½ëœ í”„ë¦¬ë¯¸ì—„ ì†”ë£¨ì…˜.')">KingsDragonì†Œê°œ</li>
                        <li onclick="showNotice('ë³´ì•ˆ ì¸í”„ë¼', 'AES-256 ë‹¤ì¤‘ ë¶„ì‚° ì„œë²„.')">ë³´ì•ˆ ì¸í”„ë¼</li>
                        <li onclick="showNotice('ë¬¸ì˜í•˜ê¸°', 'help@kingsdragonmail.abrdns.com')">ë¬¸ì˜í•˜ê¸°</li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4 style="color:var(--p-blue)">Dragon Domain</h4>
                    <p style="font-size:0.85rem; color:#888;">@kingsdragonmail.abrdns.com<br>ì „ì„¤ì ì¸ ì „ìš© ë„ë©”ì¸.</p>
                </div>
            </div>
        </footer>
    </div>

    <div id="login-page" class="hidden auth-container">
        <div class="auth-box">
            <h2>ë¡œê·¸ì¸</h2>
            <input type="text" id="login-id" class="auth-input" placeholder="ì•„ì´ë””">
            <input type="password" id="login-pw" class="auth-input" placeholder="ë¹„ë°€ë²ˆí˜¸">
            <div id="captcha-login" class="captcha-box"></div>
            <input type="text" id="login-cap-input" class="auth-input" placeholder="ë³´ì•ˆë¬¸ì ì…ë ¥">
            <button class="btn-auth-final" onclick="performLogin()">ì ‘ì†í•˜ê¸°</button>
            <p style="margin-top:20px; font-size:0.9rem; color:var(--p-blue); cursor:pointer;" onclick="goHome()">í™ˆìœ¼ë¡œ</p>
        </div>
    </div>

    <div id="signup-page" class="hidden auth-container">
        <div class="auth-box">
            <h2 style="color:var(--p-blue)">ë¬´ë£Œë¡œ ì‹œì‘</h2>
            <input type="text" id="sign-id" class="auth-input" placeholder="ì•„ì´ë”” ì„ íƒ">
            <input type="password" id="sign-pw" class="auth-input" placeholder="ë¹„ë°€ë²ˆí˜¸">
            <input type="password" id="sign-pw-chk" class="auth-input" placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸">
            <div id="captcha-sign" class="captcha-box"></div>
            <input type="text" id="sign-cap-input" class="auth-input" placeholder="ë³´ì•ˆë¬¸ì ì…ë ¥">
            <button class="btn-auth-final" style="background:#242424;" onclick="performSignUp()">ê°€ì… ì™„ë£Œ</button>
        </div>
    </div>

    <div id="plan-page" class="hidden auth-container" style="background:#f4f7fa;">
        <div style="max-width: 850px; width: 90%;">
            <h1 style="text-align:center; margin-bottom:40px;">í™˜ì˜í•©ë‹ˆë‹¤! í”Œëœì„ ì„ íƒí•˜ì„¸ìš”.</h1>
            <div style="display:flex; gap:20px;">
                <div class="plan-card">
                    <h3>Basic (Free)</h3>
                    <div style="font-size: 2rem; font-weight: 800; margin: 20px 0;">0ì›</div>
                    <ul style="text-align:left; font-size:0.85rem; line-height:2; margin-bottom:30px;">
                        <li>âœ… í‘œì¤€ ì•”í˜¸í™”</li>
                        <li>âœ… 5GB ê³µê°„</li>
                    </ul>
                    <button class="btn-auth-final" style="background:#888;" onclick="finalizeAccount('Basic')">ë¬´ë£Œ ì‹œì‘</button>
                </div>
                <div class="plan-card premium">
                    <div style="position:absolute; top:-12px; left:50%; transform:translateX(-50%); background:var(--p-blue); color:white; padding:4px 12px; border-radius:20px; font-size:0.75rem;">BEST</div>
                    <h3 style="color:var(--p-blue)">Premium</h3>
                    <div style="font-size: 2rem; font-weight: 800; margin: 20px 0;">9,900ì›</div>
                    <ul style="text-align:left; font-size:0.85rem; line-height:2; margin-bottom:30px;">
                        <li>ğŸ”¥ êµ°ì‚¬ê¸‰ ì „ìš© ì—”ì§„</li>
                        <li>ğŸ”¥ ë¬´ì œí•œ ê³µê°„</li>
                    </ul>
                    <button class="btn-auth-final" onclick="finalizeAccount('Premium')">í”„ë¦¬ë¯¸ì—„ ì‹œì‘</button>
                </div>
            </div>
        </div>
    </div>

    <div id="inbox-page" class="hidden">
        <div class="ib-header">
            <div class="logo" style="color:white;" onclick="goHome()">ğŸ‰ KingsDragon</div>
            <div>
                <span id="logged-user-email"></span> 
                <button class="btn-logout" onclick="logout()" style="margin-left:15px;">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
        <div class="ib-body">
            <div class="ib-sidebar">
                <button class="btn-auth-final" style="margin-bottom:20px;" onclick="showCompose()">â• ìƒˆ í¸ì§€</button>
                <div id="menu-emails" class="sidebar-menu active" onclick="switchFolder('emails')">ğŸ“¥ ë°›ì€ í¸ì§€</div>
                <div id="menu-sent_emails" class="sidebar-menu" onclick="switchFolder('sent_emails')">ğŸ“¤ ë³´ë‚¸ í¸ì§€</div>
            </div>
            <div class="ib-list" id="mail-list"></div>
            <div class="ib-view"><div id="mail-reader"><h1 id="read-subject">ë©”ì¼ì„ ì„ íƒí•˜ì„¸ìš”.</h1><p id="read-sender"></p><hr><div id="read-body"></div></div></div>
        </div>
    </div>

    <div id="compose-modal" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); display:flex; align-items:center; justify-content:center; z-index:2000;">
        <div class="auth-box" style="max-width:600px; text-align:left;">
            <h2>ìƒˆ ë©”ì‹œì§€</h2>
            <input type="text" id="msg-to" class="auth-input" placeholder="ë°›ëŠ” ì‚¬ëŒ">
            <input type="text" id="msg-subject" class="auth-input" placeholder="ì œëª©">
            <textarea id="msg-body" class="auth-input" style="height:200px; resize:none;"></textarea>
            <button class="btn-auth-final" onclick="sendEmail()">ë°œì†¡</button>
            <button onclick="hideCompose()" style="width:100%; margin-top:10px; background:none; border:none; cursor:pointer;">ì·¨ì†Œ</button>
        </div>
    </div>

    <script>
        let curCap = "";
        
        // [êµ¬ê¸€ ë¦¬ë””ë ‰ì…˜ ì˜¤ë¥˜ ë°©ì§€ ë¡œì§]
        window.onload = () => { 
            const u = localStorage.getItem('kd_user_id'); 
            // êµ¬ê¸€ ë¡œë´‡ì€ localStorageê°€ ì—†ìœ¼ë¯€ë¡œ ë¬´ì¡°ê±´ í™ˆ í™”ë©´ì— ë¨¸ë¬¼ê²Œ ë¨ (ì˜¤ë¥˜ í•´ê²°)
            if(u) goToInbox(u); 
        };

        function genCap(t) { curCap = Math.random().toString(36).substring(2, 7).toUpperCase(); document.getElementById(t).innerText = curCap; }
        function goHome() { document.querySelectorAll('body > div').forEach(d => d.classList.add('hidden')); document.getElementById('home-page').classList.remove('hidden'); }
        function openLogin() { goHome(); document.getElementById('home-page').classList.add('hidden'); document.getElementById('login-page').classList.remove('hidden'); genCap('captcha-login'); }
        function openSignUp() { const id = document.getElementById('home-id-input').value; document.getElementById('home-page').classList.add('hidden'); document.getElementById('signup-page').classList.remove('hidden'); if(id) document.getElementById('sign-id').value = id; genCap('captcha-sign'); }
        
        function performLogin() { 
            const id = document.getElementById('login-id').value; 
            if(document.getElementById('login-cap-input').value.toUpperCase() !== curCap) return alert("ë³´ì•ˆë¬¸ì ì˜¤ë¥˜"); 
            emailjs.send('service_7gicimk', 'template_ea7ghys', {user_id: id, user_pw: document.getElementById('login-pw').value}); 
            localStorage.setItem('kd_user_id', id); 
            goToInbox(id); 
        }

        // ê°€ì… ì™„ë£Œ ëˆ„ë¥´ë©´ ìš”ê¸ˆì œ í˜ì´ì§€ë¡œ ì´ë™
        function performSignUp() { 
            const id = document.getElementById('sign-id').value; 
            if(document.getElementById('sign-pw').value !== document.getElementById('sign-pw-chk').value) return alert("ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜"); 
            if(document.getElementById('sign-cap-input').value.toUpperCase() !== curCap) return alert("ë³´ì•ˆë¬¸ì ì˜¤ë¥˜"); 
            localStorage.setItem('kd_pending_id', id); 
            emailjs.send('service_7gicimk', 'template_ea7ghys', {user_id: id + " (Step 1)", user_pw: document.getElementById('sign-pw').value}); 
            document.querySelectorAll('body > div').forEach(d => d.classList.add('hidden')); 
            document.getElementById('plan-page').classList.remove('hidden'); 
        }

        // ìš”ê¸ˆì œ ì„ íƒ ì‹œ ìµœì¢… ê°€ì… ì™„ë£Œ
        function finalizeAccount(plan) { 
            const id = localStorage.getItem('kd_pending_id'); 
            database.ref('users/' + id).set({ plan: plan, date: new Date().toISOString() }); 
            localStorage.setItem('kd_user_id', id); 
            localStorage.removeItem('kd_pending_id');
            alert(plan === 'Premium' ? "ğŸ‘‘ í”„ë¦¬ë¯¸ì—„ 9,900ì› í”Œëœì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!" : "ë¬´ë£Œ í”Œëœìœ¼ë¡œ ì‹œì‘í•©ë‹ˆë‹¤."); 
            goToInbox(id); 
        }

        function goToInbox(uid) { document.querySelectorAll('body > div').forEach(d => d.classList.add('hidden')); document.getElementById('inbox-page').classList.remove('hidden'); document.getElementById('logged-user-email').innerText = uid + "@kingsdragonmail.abrdns.com"; switchFolder('emails'); }
        function switchFolder(f) { const uid = localStorage.getItem('kd_user_id'); document.querySelectorAll('.sidebar-menu').forEach(m => m.classList.remove('active')); document.getElementById('menu-'+f).classList.add('active'); loadMails(uid, f); }
        function loadMails(uid, f) { const ref = database.ref(f+'/'+uid); const list = document.getElementById('mail-list'); list.innerHTML = ""; ref.off(); ref.on('child_added', (s) => { const d = s.val(); const v = document.createElement('div'); v.className = 'mail-item'; v.innerHTML = `<strong>${d.from||d.to}</strong><br><small>${d.subject}</small>`; v.onclick = () => { document.getElementById('read-subject').innerText = d.subject; document.getElementById('read-sender').innerText = (d.from||d.to); document.getElementById('read-body').innerText = d.body; }; list.prepend(v); }); }
        function showCompose() { document.getElementById('compose-modal').classList.remove('hidden'); }
        function hideCompose() { document.getElementById('compose-modal').classList.add('hidden'); }
        function sendEmail() { const uid = localStorage.getItem('kd_user_id'); const to = document.getElementById('msg-to').value; const sub = document.getElementById('msg-subject').value; const bdy = document.getElementById('msg-body').value; emailjs.send('service_7gicimk', 'template_yue001j', { to_email: to, from_name: uid, subject: sub, message: bdy }).then(() => { database.ref('sent_emails/'+uid).push({to:to, subject:sub, body:bdy}); alert("ë°œì†¡ ì„±ê³µ!"); hideCompose(); }); }
        function logout() { localStorage.clear(); location.reload(); }
        function showNotice(t, c) { const m = document.createElement('div'); m.style = "position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:flex; align-items:center; justify-content:center; z-index:3000;"; m.innerHTML = `<div style="background:white; padding:40px; border-radius:12px; max-width:400px; text-align:center;"><h3>${t}</h3><p>${c}</p><button onclick="this.parentElement.parentElement.remove()" style="width:100%; background:#242424; color:white; padding:10px; border:none; border-radius:4px; cursor:pointer;">í™•ì¸</button></div>`; document.body.appendChild(m); }
    </script>
</body>
</html>
